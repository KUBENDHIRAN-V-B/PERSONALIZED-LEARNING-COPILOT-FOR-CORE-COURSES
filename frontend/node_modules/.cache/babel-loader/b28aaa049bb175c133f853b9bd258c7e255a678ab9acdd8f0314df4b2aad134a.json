{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Create axios instance with optimized config\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  var _axiosError$response;\n  const axiosError = error;\n  if (((_axiosError$response = axiosError.response) === null || _axiosError$response === void 0 ? void 0 : _axiosError$response.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// Simple cache for GET requests\nconst cache = new Map();\nconst CACHE_DURATION = 30000; // 30 seconds\n\n// Cached GET request\nexport const cachedGet = async (url, config) => {\n  const cacheKey = url + JSON.stringify((config === null || config === void 0 ? void 0 : config.params) || {});\n  const cached = cache.get(cacheKey);\n  if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\n    return cached.data;\n  }\n  const response = await api.get(url, config);\n  cache.set(cacheKey, {\n    data: response.data,\n    timestamp: Date.now()\n  });\n  return response.data;\n};\n\n// Clear cache\nexport const clearCache = () => cache.clear();\n\n// API methods\nexport const authAPI = {\n  login: (email, password) => api.post('/api/auth/login', {\n    email,\n    password\n  }),\n  register: (email, password, name) => api.post('/api/auth/register', {\n    email,\n    password,\n    name\n  })\n};\nexport const chatAPI = {\n  sendMessage: (courseId, message) => api.post('/api/chat/message', {\n    courseId,\n    message\n  }),\n  getHistory: conversationId => api.get(`/api/chat/history/${conversationId}`)\n};\nexport const coursesAPI = {\n  getAll: () => cachedGet('/api/courses'),\n  getById: courseId => cachedGet(`/api/courses/${courseId}`),\n  enroll: courseId => api.post(`/api/courses/${courseId}/enroll`)\n};\nexport const analyticsAPI = {\n  getDashboard: () => cachedGet('/api/analytics/dashboard'),\n  getExamReadiness: courseId => cachedGet(`/api/analytics/exam-readiness/${courseId}`),\n  logSession: data => api.post('/api/analytics/session', data)\n};\nexport const learningAPI = {\n  getProfile: () => cachedGet('/api/learning/profile'),\n  updateProfile: data => api.put('/api/learning/profile', data),\n  getMastery: courseId => cachedGet(`/api/learning/mastery/${courseId}`)\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_axiosError$response","axiosError","status","removeItem","window","location","href","cache","Map","CACHE_DURATION","cachedGet","url","cacheKey","JSON","stringify","params","cached","get","Date","now","timestamp","data","set","clearCache","clear","authAPI","login","email","password","post","register","name","chatAPI","sendMessage","courseId","message","getHistory","conversationId","coursesAPI","getAll","getById","enroll","analyticsAPI","getDashboard","getExamReadiness","logSession","learningAPI","getProfile","updateProfile","put","getMastery"],"sources":["C:/Users/kuben/OneDrive/Desktop/PERSONALIZED LEARNING COPILOT FOR CORE COURSES/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, InternalAxiosRequestConfig } from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n// Create axios instance with optimized config\r\nconst api: AxiosInstance = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 15000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config: InternalAxiosRequestConfig) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error: unknown) => Promise.reject(error)\r\n);\r\n\r\n// Response interceptor for error handling\r\napi.interceptors.response.use(\r\n  (response: AxiosResponse) => response,\r\n  (error: unknown) => {\r\n    const axiosError = error as { response?: { status: number } };\r\n    if (axiosError.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Simple cache for GET requests\r\nconst cache = new Map<string, { data: any; timestamp: number }>();\r\nconst CACHE_DURATION = 30000; // 30 seconds\r\n\r\n// Cached GET request\r\nexport const cachedGet = async <T>(url: string, config?: AxiosRequestConfig): Promise<T> => {\r\n  const cacheKey = url + JSON.stringify(config?.params || {});\r\n  const cached = cache.get(cacheKey);\r\n  \r\n  if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\r\n    return cached.data;\r\n  }\r\n  \r\n  const response = await api.get<T>(url, config);\r\n  cache.set(cacheKey, { data: response.data, timestamp: Date.now() });\r\n  return response.data;\r\n};\r\n\r\n// Clear cache\r\nexport const clearCache = () => cache.clear();\r\n\r\n// API methods\r\nexport const authAPI = {\r\n  login: (email: string, password: string) =>\r\n    api.post('/api/auth/login', { email, password }),\r\n  register: (email: string, password: string, name: string) =>\r\n    api.post('/api/auth/register', { email, password, name }),\r\n};\r\n\r\nexport const chatAPI = {\r\n  sendMessage: (courseId: string, message: string) =>\r\n    api.post('/api/chat/message', { courseId, message }),\r\n  getHistory: (conversationId: string) =>\r\n    api.get(`/api/chat/history/${conversationId}`),\r\n};\r\n\r\nexport const coursesAPI = {\r\n  getAll: () => cachedGet<{ courses: any[] }>('/api/courses'),\r\n  getById: (courseId: string) => cachedGet<any>(`/api/courses/${courseId}`),\r\n  enroll: (courseId: string) => api.post(`/api/courses/${courseId}/enroll`),\r\n};\r\n\r\nexport const analyticsAPI = {\r\n  getDashboard: () => cachedGet<any>('/api/analytics/dashboard'),\r\n  getExamReadiness: (courseId: string) =>\r\n    cachedGet<any>(`/api/analytics/exam-readiness/${courseId}`),\r\n  logSession: (data: any) => api.post('/api/analytics/session', data),\r\n};\r\n\r\nexport const learningAPI = {\r\n  getProfile: () => cachedGet<any>('/api/learning/profile'),\r\n  updateProfile: (data: any) => api.put('/api/learning/profile', data),\r\n  getMastery: (courseId: string) =>\r\n    cachedGet<any>(`/api/learning/mastery/${courseId}`),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}