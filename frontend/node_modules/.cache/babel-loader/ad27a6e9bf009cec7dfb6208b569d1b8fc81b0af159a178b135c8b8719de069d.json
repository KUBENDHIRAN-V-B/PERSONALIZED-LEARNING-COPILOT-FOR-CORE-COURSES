{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Create axios instance with optimized config\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 15000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  if (error instanceof Error && 'response' in error) {\n    var _axiosError$response;\n    const axiosError = error;\n    if (((_axiosError$response = axiosError.response) === null || _axiosError$response === void 0 ? void 0 : _axiosError$response.status) === 401) {\n      console.error('Unauthorized access');\n    }\n  }\n  return Promise.reject(error);\n});\n\n// Simple cache for GET requests\nconst cache = new Map();\nconst CACHE_DURATION = 30000; // 30 seconds\nconst MAX_CACHE_SIZE = 50; // Prevent unbounded memory growth\n\n// Cached GET request\nexport const cachedGet = async (url, config) => {\n  const cacheKey = url + JSON.stringify((config === null || config === void 0 ? void 0 : config.params) || {});\n  const cached = cache.get(cacheKey);\n  if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\n    return cached.data;\n  }\n  const response = await api.get(url, config);\n\n  // Implement cache size limit\n  if (cache.size >= MAX_CACHE_SIZE) {\n    const firstKey = cache.keys().next().value;\n    cache.delete(firstKey);\n  }\n  cache.set(cacheKey, {\n    data: response.data,\n    timestamp: Date.now()\n  });\n  return response.data;\n};\n\n// Clear cache\nexport const clearCache = () => cache.clear();\n\n// API methods\nexport const authAPI = {\n  login: (email, password) => api.post('/api/auth/login', {\n    email,\n    password\n  }),\n  register: (email, password, name) => api.post('/api/auth/register', {\n    email,\n    password,\n    name\n  })\n};\nexport const chatAPI = {\n  sendMessage: (courseId, message, conversationId) => api.post('/api/chat/message', {\n    courseId,\n    message,\n    conversationId\n  }),\n  getHistory: conversationId => api.get(`/api/chat/history/${conversationId}`)\n};\nexport const coursesAPI = {\n  getAll: () => cachedGet('/api/courses'),\n  getById: courseId => cachedGet(`/api/courses/${courseId}`),\n  enroll: courseId => api.post(`/api/courses/${courseId}/enroll`)\n};\nexport const analyticsAPI = {\n  getDashboard: () => cachedGet('/api/analytics/dashboard'),\n  getExamReadiness: courseId => cachedGet(`/api/analytics/exam-readiness/${courseId}`),\n  logSession: data => api.post('/api/analytics/session', data),\n  // Personalized insights\n  getInsights: () => api.get('/api/analytics/insights'),\n  // Study timer\n  startTimer: (topic, courseId) => api.post('/api/analytics/timer/start', {\n    topic,\n    courseId\n  }),\n  stopTimer: (accuracy, focusScore) => api.post('/api/analytics/timer/stop', {\n    accuracy,\n    focusScore\n  }),\n  getTimerStatus: () => api.get('/api/analytics/timer/status'),\n  // Mastery updates\n  updateMastery: (topic, score, timeSpent) => api.post('/api/analytics/mastery/update', {\n    topic,\n    score,\n    timeSpent\n  }),\n  // User preferences\n  setFocusTime: (startHour, endHour) => api.post('/api/analytics/preferences/focus-time', {\n    startHour,\n    endHour\n  }),\n  clearFocusTime: () => api.delete('/api/analytics/preferences/focus-time'),\n  setMasteryGoal: (topic, goal) => api.post('/api/analytics/preferences/mastery-goal', {\n    topic,\n    goal\n  })\n};\nexport const learningAPI = {\n  getProfile: () => cachedGet('/api/learning/profile'),\n  updateProfile: data => api.put('/api/learning/profile', data),\n  getMastery: courseId => cachedGet(`/api/learning/mastery/${courseId}`)\n};\nexport const statusAPI = {\n  getStatus: () => api.get('/api/status')\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","timeout","headers","interceptors","response","use","error","Error","_axiosError$response","axiosError","status","console","Promise","reject","cache","Map","CACHE_DURATION","MAX_CACHE_SIZE","cachedGet","url","config","cacheKey","JSON","stringify","params","cached","get","Date","now","timestamp","data","size","firstKey","keys","next","value","delete","set","clearCache","clear","authAPI","login","email","password","post","register","name","chatAPI","sendMessage","courseId","message","conversationId","getHistory","coursesAPI","getAll","getById","enroll","analyticsAPI","getDashboard","getExamReadiness","logSession","getInsights","startTimer","topic","stopTimer","accuracy","focusScore","getTimerStatus","updateMastery","score","timeSpent","setFocusTime","startHour","endHour","clearFocusTime","setMasteryGoal","goal","learningAPI","getProfile","updateProfile","put","getMastery","statusAPI","getStatus"],"sources":["C:/Users/kuben/OneDrive/Desktop/PERSONALIZED LEARNING COPILOT FOR CORE COURSES/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse, InternalAxiosRequestConfig } from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n// Create axios instance with optimized config\r\nconst api: AxiosInstance = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 15000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Response interceptor for error handling\r\napi.interceptors.response.use(\r\n  (response: AxiosResponse) => response,\r\n  (error: unknown) => {\r\n    if (error instanceof Error && 'response' in error) {\r\n      const axiosError = error as { response?: { status: number } };\r\n      if (axiosError.response?.status === 401) {\r\n        console.error('Unauthorized access');\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Simple cache for GET requests\r\nconst cache = new Map<string, { data: any; timestamp: number }>();\r\nconst CACHE_DURATION = 30000; // 30 seconds\r\nconst MAX_CACHE_SIZE = 50; // Prevent unbounded memory growth\r\n\r\n// Cached GET request\r\nexport const cachedGet = async <T>(url: string, config?: AxiosRequestConfig): Promise<T> => {\r\n  const cacheKey = url + JSON.stringify(config?.params || {});\r\n  const cached = cache.get(cacheKey);\r\n  \r\n  if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {\r\n    return cached.data;\r\n  }\r\n  \r\n  const response = await api.get<T>(url, config);\r\n  \r\n  // Implement cache size limit\r\n  if (cache.size >= MAX_CACHE_SIZE) {\r\n    const firstKey = cache.keys().next().value;\r\n    cache.delete(firstKey);\r\n  }\r\n  \r\n  cache.set(cacheKey, { data: response.data, timestamp: Date.now() });\r\n  return response.data;\r\n};\r\n\r\n// Clear cache\r\nexport const clearCache = () => cache.clear();\r\n\r\n// API methods\r\nexport const authAPI = {\r\n  login: (email: string, password: string) =>\r\n    api.post('/api/auth/login', { email, password }),\r\n  register: (email: string, password: string, name: string) =>\r\n    api.post('/api/auth/register', { email, password, name }),\r\n};\r\n\r\nexport const chatAPI = {\r\n  sendMessage: (courseId: string, message: string, conversationId?: string) =>\r\n    api.post('/api/chat/message', { courseId, message, conversationId }),\r\n  getHistory: (conversationId: string) =>\r\n    api.get(`/api/chat/history/${conversationId}`),\r\n};\r\n\r\nexport const coursesAPI = {\r\n  getAll: () => cachedGet<{ courses: any[] }>('/api/courses'),\r\n  getById: (courseId: string) => cachedGet<any>(`/api/courses/${courseId}`),\r\n  enroll: (courseId: string) => api.post(`/api/courses/${courseId}/enroll`),\r\n};\r\n\r\nexport const analyticsAPI = {\r\n  getDashboard: () => cachedGet<any>('/api/analytics/dashboard'),\r\n  getExamReadiness: (courseId: string) =>\r\n    cachedGet<any>(`/api/analytics/exam-readiness/${courseId}`),\r\n  logSession: (data: any) => api.post('/api/analytics/session', data),\r\n  \r\n  // Personalized insights\r\n  getInsights: () => api.get('/api/analytics/insights'),\r\n  \r\n  // Study timer\r\n  startTimer: (topic: string, courseId: string) => \r\n    api.post('/api/analytics/timer/start', { topic, courseId }),\r\n  stopTimer: (accuracy?: number, focusScore?: number) => \r\n    api.post('/api/analytics/timer/stop', { accuracy, focusScore }),\r\n  getTimerStatus: () => api.get('/api/analytics/timer/status'),\r\n  \r\n  // Mastery updates\r\n  updateMastery: (topic: string, score: number, timeSpent: number) =>\r\n    api.post('/api/analytics/mastery/update', { topic, score, timeSpent }),\r\n  \r\n  // User preferences\r\n  setFocusTime: (startHour: number, endHour: number) =>\r\n    api.post('/api/analytics/preferences/focus-time', { startHour, endHour }),\r\n  clearFocusTime: () =>\r\n    api.delete('/api/analytics/preferences/focus-time'),\r\n  setMasteryGoal: (topic: string, goal: number) =>\r\n    api.post('/api/analytics/preferences/mastery-goal', { topic, goal }),\r\n};\r\n\r\nexport const learningAPI = {\r\n  getProfile: () => cachedGet<any>('/api/learning/profile'),\r\n  updateProfile: (data: any) => api.put('/api/learning/profile', data),\r\n  getMastery: (courseId: string) =>\r\n    cachedGet<any>(`/api/learning/mastery/${courseId}`),\r\n};\r\n\r\nexport const statusAPI = {\r\n  getStatus: () => api.get('/api/status'),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}