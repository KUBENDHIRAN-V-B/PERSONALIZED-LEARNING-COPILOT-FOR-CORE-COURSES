{"ast":null,"code":"import React,{useEffect,useState,useCallback,memo,useMemo}from'react';import{useNavigate}from'react-router-dom';import{FiArrowLeft,FiTrendingUp,FiClock,FiTarget,FiZap}from'react-icons/fi';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,AreaChart,Area}from'recharts';import{analyticsAPI}from'../services/api';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";// Skeleton loader component\nconst Skeleton=_ref=>{let{className=''}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-200 animate-pulse rounded \".concat(className)});};// Stat Card component\nconst StatCard=_ref2=>{let{label,value,subtext,color='blue',loading=false}=_ref2;const colors={blue:'text-blue-600',green:'text-green-600',purple:'text-purple-600',orange:'text-orange-600'};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Skeleton,{className:\"h-4 w-20 mb-2\"}),/*#__PURE__*/_jsx(Skeleton,{className:\"h-8 w-16 mb-1\"}),/*#__PURE__*/_jsx(Skeleton,{className:\"h-3 w-24\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-sm font-semibold\",children:label}),/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold \".concat(colors[color]),children:value}),subtext&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 text-xs\",children:subtext})]})});};const AnalyticsPage=/*#__PURE__*/memo(_ref3=>{let{onLogout}=_ref3;const navigate=useNavigate();const[analytics,setAnalytics]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{let mounted=true;const fetchAnalytics=async()=>{try{const data=await analyticsAPI.getDashboard();if(mounted)setAnalytics(data);}catch(error){console.error('Failed to fetch analytics:',error);}finally{if(mounted)setLoading(false);}};fetchAnalytics();return()=>{mounted=false;};},[]);const goBack=useCallback(()=>navigate('/dashboard'),[navigate]);const chartData=useMemo(()=>[{name:'Mon',accuracy:75,sessions:2},{name:'Tue',accuracy:78,sessions:3},{name:'Wed',accuracy:82,sessions:2},{name:'Thu',accuracy:80,sessions:4},{name:'Fri',accuracy:85,sessions:3},{name:'Sat',accuracy:88,sessions:5},{name:'Sun',accuracy:90,sessions:4}],[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-sm sticky top-0 z-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-4 flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:goBack,className:\"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(FiArrowLeft,{}),\" Back\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Learning Analytics\"})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8\",children:[/*#__PURE__*/_jsx(StatCard,{label:\"Sessions\",value:(analytics===null||analytics===void 0?void 0:analytics.thisWeek.sessions)||0,subtext:\"This week\",color:\"blue\",loading:loading}),/*#__PURE__*/_jsx(StatCard,{label:\"Hours\",value:\"\".concat((analytics===null||analytics===void 0?void 0:analytics.thisWeek.hours)||0,\"h\"),subtext:\"This week\",color:\"green\",loading:loading}),/*#__PURE__*/_jsx(StatCard,{label:\"Accuracy\",value:\"\".concat((analytics===null||analytics===void 0?void 0:analytics.thisWeek.accuracy)||0,\"%\"),subtext:\"Average\",color:\"purple\",loading:loading}),/*#__PURE__*/_jsx(StatCard,{label:\"Concepts\",value:(analytics===null||analytics===void 0?void 0:analytics.thisWeek.conceptsMastered)||0,subtext:\"Mastered\",color:\"orange\",loading:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 mb-8 animate-fade-in\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FiTrendingUp,{className:\"text-green-500\"}),\" This Month's Progress\"]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[1,2,3].map(i=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Skeleton,{className:\"h-4 w-24 mb-2\"}),/*#__PURE__*/_jsx(Skeleton,{className:\"h-8 w-32\"})]},i))}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(FiClock,{className:\"text-blue-600 text-xl\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-sm\",children:\"Total Time\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:[(analytics===null||analytics===void 0?void 0:analytics.thisMonth.totalTime)||0,\"h\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(FiTrendingUp,{className:\"text-green-600 text-xl\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-sm\",children:\"Improvement\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-green-600\",children:[\"+\",(analytics===null||analytics===void 0?void 0:analytics.thisMonth.improvement)||0,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(FiTarget,{className:\"text-purple-600 text-xl\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-sm\",children:\"Fastest Learning\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-purple-600\",children:(analytics===null||analytics===void 0?void 0:analytics.thisMonth.fastestLearning)||'N/A'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 animate-fade-in\",style:{animationDelay:'100ms'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Weekly Accuracy Trend\"}),loading?/*#__PURE__*/_jsx(Skeleton,{className:\"h-64 w-full\"}):/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:280,children:/*#__PURE__*/_jsxs(AreaChart,{data:chartData,children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsxs(\"linearGradient\",{id:\"colorAccuracy\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\",children:[/*#__PURE__*/_jsx(\"stop\",{offset:\"5%\",stopColor:\"#3b82f6\",stopOpacity:0.3}),/*#__PURE__*/_jsx(\"stop\",{offset:\"95%\",stopColor:\"#3b82f6\",stopOpacity:0})]})}),/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#f0f0f0\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\",stroke:\"#6b7280\",fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#6b7280\",fontSize:12,domain:[60,100]}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',boxShadow:'0 4px 6px -1px rgba(0, 0, 0, 0.1)'}}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"accuracy\",stroke:\"#3b82f6\",strokeWidth:2,fillOpacity:1,fill:\"url(#colorAccuracy)\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 animate-fade-in\",style:{animationDelay:'200ms'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Daily Sessions\"}),loading?/*#__PURE__*/_jsx(Skeleton,{className:\"h-64 w-full\"}):/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:280,children:/*#__PURE__*/_jsxs(BarChart,{data:chartData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\",stroke:\"#f0f0f0\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\",stroke:\"#6b7280\",fontSize:12}),/*#__PURE__*/_jsx(YAxis,{stroke:\"#6b7280\",fontSize:12}),/*#__PURE__*/_jsx(Tooltip,{contentStyle:{backgroundColor:'white',border:'1px solid #e5e7eb',borderRadius:'8px',boxShadow:'0 4px 6px -1px rgba(0, 0, 0, 0.1)'}}),/*#__PURE__*/_jsx(Bar,{dataKey:\"sessions\",fill:\"#8b5cf6\",radius:[4,4,0,0]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 animate-fade-in\",style:{animationDelay:'300ms'},children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FiZap,{className:\"text-yellow-500\"}),\" Personalized Recommendations\"]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(Skeleton,{className:\"h-6 w-full\"}),/*#__PURE__*/_jsx(Skeleton,{className:\"h-6 w-4/5\"}),/*#__PURE__*/_jsx(Skeleton,{className:\"h-6 w-3/4\"})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-3\",children:analytics===null||analytics===void 0?void 0:analytics.recommendations.map((rec,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-3 animate-fade-in p-3 bg-gray-50 rounded-lg\",style:{animationDelay:\"\".concat(400+idx*100,\"ms\")},children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 text-sm font-bold\",children:\"\\u2713\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:rec})]},idx))})]})]})]});});export default AnalyticsPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}