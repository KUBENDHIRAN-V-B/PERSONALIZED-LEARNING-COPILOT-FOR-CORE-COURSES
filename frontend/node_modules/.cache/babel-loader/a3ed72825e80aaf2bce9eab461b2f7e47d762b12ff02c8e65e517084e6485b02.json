{"ast":null,"code":"import _objectSpread from\"C:/Users/kuben/OneDrive/Desktop/PERSONALIZED LEARNING COPILOT FOR CORE COURSES/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useRef,useState,useCallback}from'react';const INACTIVITY_THRESHOLD=5000;export const useFocusTimer=()=>{const[state,setState]=useState({totalTime:0,activeTime:0,focusScore:0,isActive:true});const timerRef=useRef();const lastActivityRef=useRef(Date.now());const isVisibleRef=useRef(true);const updateFocusScore=useCallback((active,total)=>{const score=total>0?Math.round(active/total*100):0;setState(prev=>_objectSpread(_objectSpread({},prev),{},{focusScore:Math.min(score,100)}));},[]);useEffect(()=>{const handleActivity=()=>{lastActivityRef.current=Date.now();setState(prev=>_objectSpread(_objectSpread({},prev),{},{isActive:true}));};const handleVisibilityChange=()=>{isVisibleRef.current=!document.hidden;if(!document.hidden){lastActivityRef.current=Date.now();}};document.addEventListener('mousemove',handleActivity);document.addEventListener('keydown',handleActivity);document.addEventListener('visibilitychange',handleVisibilityChange);timerRef.current=setInterval(()=>{setState(prev=>{const newTotal=prev.totalTime+1;const timeSinceActivity=Date.now()-lastActivityRef.current;const isCurrentlyActive=isVisibleRef.current&&timeSinceActivity<INACTIVITY_THRESHOLD;const newActive=isCurrentlyActive?prev.activeTime+1:prev.activeTime;updateFocusScore(newActive,newTotal);return _objectSpread(_objectSpread({},prev),{},{totalTime:newTotal,activeTime:newActive,isActive:isCurrentlyActive});});},1000);return()=>{document.removeEventListener('mousemove',handleActivity);document.removeEventListener('keydown',handleActivity);document.removeEventListener('visibilitychange',handleVisibilityChange);if(timerRef.current)clearInterval(timerRef.current);};},[updateFocusScore]);const reset=useCallback(()=>{setState({totalTime:0,activeTime:0,focusScore:0,isActive:true});lastActivityRef.current=Date.now();},[]);return _objectSpread(_objectSpread({},state),{},{reset});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}