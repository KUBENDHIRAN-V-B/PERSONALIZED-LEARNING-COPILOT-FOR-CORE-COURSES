{"ast":null,"code":"import React,{useState,Suspense,lazy,useCallback,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{Provider}from'react-redux';import store from'./store';// Lazy load pages for better performance\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=/*#__PURE__*/lazy(()=>import('./pages/LoginPage'));const DashboardPage=/*#__PURE__*/lazy(()=>import('./pages/DashboardPage'));const ChatPage=/*#__PURE__*/lazy(()=>import('./pages/ChatPage'));const AnalyticsPage=/*#__PURE__*/lazy(()=>import('./pages/AnalyticsPage'));const CoursesPage=/*#__PURE__*/lazy(()=>import('./pages/CoursesPage'));// Loading component with smooth animation\nconst PageLoader=()=>/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-white animate-fade-in\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner mx-auto mb-4\",style:{width:48,height:48,borderWidth:4}}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium\",children:\"Loading...\"})]})});function App(){const[isAuthenticated,setIsAuthenticated]=useState(()=>{return!!localStorage.getItem('token');});// Memoized handlers to prevent unnecessary re-renders\nconst handleLogin=useCallback(token=>{localStorage.setItem('token',token);setIsAuthenticated(true);},[]);const handleLogout=useCallback(()=>{localStorage.removeItem('token');setIsAuthenticated(false);},[]);// Listen for storage changes (multi-tab logout)\nuseEffect(()=>{const handleStorageChange=e=>{if(e.key==='token'){setIsAuthenticated(!!e.newValue);}};window.addEventListener('storage',handleStorageChange);return()=>window.removeEventListener('storage',handleStorageChange);},[]);return/*#__PURE__*/_jsx(Provider,{store:store,children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(PageLoader,{}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):/*#__PURE__*/_jsx(LoginPage,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:isAuthenticated?/*#__PURE__*/_jsx(DashboardPage,{onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/chat/:courseId\",element:isAuthenticated?/*#__PURE__*/_jsx(ChatPage,{onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/analytics\",element:isAuthenticated?/*#__PURE__*/_jsx(AnalyticsPage,{onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/courses\",element:isAuthenticated?/*#__PURE__*/_jsx(CoursesPage,{onLogout:handleLogout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})})]})})})});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}