"use strict";(self.webpackChunklearning_copilot_frontend=self.webpackChunklearning_copilot_frontend||[]).push([[429],{2932(e,s,a){a.d(s,{BP:()=>o,h2:()=>n,rh:()=>c});const t=a(6910).A.create({baseURL:"http://localhost:5000",timeout:15e3,headers:{"Content-Type":"application/json"}});t.interceptors.response.use(e=>e,e=>{try{if(e instanceof Error&&"response"in e){var s;401===(null===(s=e.response)||void 0===s?void 0:s.status)&&console.error("Unauthorized access")}}catch(a){console.error("Error in response interceptor:",a)}return Promise.reject(e)});const r=new Map,i=async(e,s)=>{const a="".concat(e,":").concat(JSON.stringify((null===s||void 0===s?void 0:s.params)||{})),i=r.get(a),n=Date.now();if(i&&n-i.timestamp<3e4)return i.data;try{const i=await t.get(e,s);if(r.size>=50){const e=r.keys().next().value;e&&r.delete(e)}return r.set(a,{data:i.data,timestamp:n}),i.data}catch(o){throw console.error("Failed to fetch ".concat(e,":"),o),o}},n={sendMessage:async(e,s,a)=>{if(!e||!s)throw new Error("Course ID and message are required");const r=localStorage.getItem("api_keys");let i={};if(r)try{i=JSON.parse(r).reduce((e,s)=>(e[s.name.toLowerCase()]=s.key,e),{})}catch(n){console.error("Error parsing API keys:",n)}return t.post("/api/chat/message",{courseId:e,message:s,conversationId:a,apiKeys:i})},getHistory:e=>{if(!e)throw new Error("Conversation ID is required");return t.get("/api/chat/history/".concat(e))}},o={getAll:async()=>i("/api/courses"),getById:e=>{if(!e)throw new Error("Course ID is required");return i("/api/courses/".concat(e))},enroll:e=>{if(!e)throw new Error("Course ID is required");return t.post("/api/courses/".concat(e,"/enroll"))}},c={getDashboard:async()=>i("/api/analytics/dashboard"),getExamReadiness:e=>{if(!e)throw new Error("Course ID is required");return i("/api/analytics/exam-readiness/".concat(e))},logSession:e=>{if(!e)throw new Error("Session data is required");return t.post("/api/analytics/session",e)},getInsights:async()=>t.get("/api/analytics/insights"),startTimer:(e,s)=>{if(!e||!s)throw new Error("Topic and course ID are required");return t.post("/api/analytics/timer/start",{topic:e,courseId:s})},stopTimer:(e,s)=>t.post("/api/analytics/timer/stop",{accuracy:e,focusScore:s}),getTimerStatus:()=>t.get("/api/analytics/timer/status"),updateMastery:(e,s,a)=>{if(!e||void 0===s)throw new Error("Topic and score are required");return t.post("/api/analytics/mastery/update",{topic:e,score:s,timeSpent:a})},setFocusTime:(e,s)=>t.post("/api/analytics/preferences/focus-time",{startHour:e,endHour:s}),clearFocusTime:()=>t.delete("/api/analytics/preferences/focus-time"),setMasteryGoal:(e,s)=>{if(!e||void 0===s)throw new Error("Topic and goal are required");return t.post("/api/analytics/preferences/mastery-goal",{topic:e,goal:s})}}},7429(e,s,a){a.r(s),a.d(s,{default:()=>f});var t=a(9950),r=a(8429),i=a(9861),n=a(6335),o=a(1095),c=a(3245),l=a(734),d=a(2096),x=a(158),m=a(4813),h=a(294),u=a(8354),p=a(2932),y=a(4414);const g=e=>{let{className:s=""}=e;return(0,y.jsx)("div",{className:"bg-gray-200 animate-pulse rounded ".concat(s)})},f=(0,t.memo)(()=>{const e=(0,r.Zp)(),[s,a]=(0,t.useState)(null),[f,j]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=!0;return(async()=>{try{const s=await p.rh.getDashboard();e&&a(s)}catch(s){console.error("Failed to fetch analytics:",s)}finally{e&&j(!1)}})(),()=>{e=!1}},[]);const b=(0,t.useCallback)(()=>e("/dashboard"),[e]),w=(0,t.useMemo)(()=>[{name:"Mon",accuracy:75,sessions:2},{name:"Tue",accuracy:78,sessions:3},{name:"Wed",accuracy:82,sessions:2},{name:"Thu",accuracy:80,sessions:4},{name:"Fri",accuracy:85,sessions:3},{name:"Sat",accuracy:88,sessions:5},{name:"Sun",accuracy:90,sessions:4}],[]);return(0,y.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,y.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,y.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4 flex items-center gap-4",children:[(0,y.jsxs)("button",{onClick:b,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 transition-colors",children:[(0,y.jsx)(i.kRp,{})," Back"]}),(0,y.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Learning Analytics"})]})}),(0,y.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8 animate-fade-in",children:[(0,y.jsxs)("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,y.jsx)(i.ARf,{className:"text-green-500"})," This Month's Progress"]}),f?(0,y.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,y.jsxs)("div",{children:[(0,y.jsx)(g,{className:"h-4 w-24 mb-2"}),(0,y.jsx)(g,{className:"h-8 w-32"})]},e))}):(0,y.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,y.jsx)(i.Ohp,{className:"text-blue-600 text-xl"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"text-gray-600 text-sm",children:"Total Time"}),(0,y.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[(null===s||void 0===s?void 0:s.thisMonth.totalTime)||0,"h"]})]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,y.jsx)(i.ARf,{className:"text-green-600 text-xl"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"text-gray-600 text-sm",children:"Improvement"}),(0,y.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["+",(null===s||void 0===s?void 0:s.thisMonth.improvement)||0,"%"]})]})]}),(0,y.jsxs)("div",{className:"flex items-center gap-4",children:[(0,y.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,y.jsx)(i.x_j,{className:"text-purple-600 text-xl"})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"text-gray-600 text-sm",children:"Fastest Learning"}),(0,y.jsx)("div",{className:"text-lg font-bold text-purple-600",children:(null===s||void 0===s?void 0:s.thisMonth.fastestLearning)||"N/A"})]})]})]})]}),(0,y.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 animate-fade-in",style:{animationDelay:"100ms"},children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Weekly Accuracy Trend"}),f?(0,y.jsx)(g,{className:"h-64 w-full"}):(0,y.jsx)(o.u,{width:"100%",height:280,children:(0,y.jsxs)(u.Q,{data:w,children:[(0,y.jsx)("defs",{children:(0,y.jsxs)("linearGradient",{id:"colorAccuracy",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,y.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,y.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),(0,y.jsx)(c.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,y.jsx)(x.W,{dataKey:"name",stroke:"#6b7280",fontSize:12}),(0,y.jsx)(m.h,{stroke:"#6b7280",fontSize:12,domain:[60,100]}),(0,y.jsx)(n.m,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,y.jsx)(l.G,{type:"monotone",dataKey:"accuracy",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorAccuracy)"})]})})]}),(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 animate-fade-in",style:{animationDelay:"200ms"},children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Daily Sessions"}),f?(0,y.jsx)(g,{className:"h-64 w-full"}):(0,y.jsx)(o.u,{width:"100%",height:280,children:(0,y.jsxs)(h.E,{data:w,children:[(0,y.jsx)(c.d,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),(0,y.jsx)(x.W,{dataKey:"name",stroke:"#6b7280",fontSize:12}),(0,y.jsx)(m.h,{stroke:"#6b7280",fontSize:12}),(0,y.jsx)(n.m,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),(0,y.jsx)(d.y,{dataKey:"sessions",fill:"#8b5cf6",radius:[4,4,0,0]})]})})]})]}),(0,y.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 animate-fade-in",style:{animationDelay:"300ms"},children:[(0,y.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,y.jsx)(i.FrA,{className:"text-yellow-500"})," Personalized Recommendations"]}),f?(0,y.jsxs)("div",{className:"space-y-3",children:[(0,y.jsx)(g,{className:"h-6 w-full"}),(0,y.jsx)(g,{className:"h-6 w-4/5"}),(0,y.jsx)(g,{className:"h-6 w-3/4"})]}):(0,y.jsx)("ul",{className:"space-y-3",children:null===s||void 0===s?void 0:s.recommendations.map((e,s)=>(0,y.jsxs)("li",{className:"flex items-start gap-3 animate-fade-in p-3 bg-gray-50 rounded-lg",style:{animationDelay:"".concat(400+100*s,"ms")},children:[(0,y.jsx)("span",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,y.jsx)("span",{className:"text-green-600 text-sm font-bold",children:"\u2713"})}),(0,y.jsx)("span",{className:"text-gray-700",children:e})]},s))})]})]})]})})}}]);