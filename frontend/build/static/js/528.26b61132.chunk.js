"use strict";(self.webpackChunklearning_copilot_frontend=self.webpackChunklearning_copilot_frontend||[]).push([[528],{4528(e,s,t){t.r(s),t.d(s,{default:()=>c});var l=t(2555),n=t(9950),a=t(8429),i=t(9861),r=t(2932),o=t(4414);const c=()=>{const e=(0,a.Zp)(),[s,t]=(0,n.useState)({stage:"setup",category:"",selectedTopic:"",difficulty:"medium",questionCount:5,questions:[],currentQuestion:0,answers:[],score:0,timeSpent:0,loading:!1}),[c,d]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e;return"quiz"===s.stage&&(e=setInterval(()=>{d(e=>e+1)},1e3)),()=>clearInterval(e)},[s.stage]);const u="cs"===s.category?["Arrays","Linked Lists","Trees","Graphs","Sorting","Searching","Dynamic Programming","Stacks & Queues","DBMS","Operating Systems","Computer Networks","OOP","Database Design","SQL","Algorithms","Compiler Design","Theory of Computation","Software Engineering"]:"ece"===s.category?["Digital Electronics","Signals & Systems","Communication Systems","Electromagnetic Theory","Control Systems","Microprocessors","VLSI Design","Embedded Systems","DSP","Wireless Communication"]:[],m=(0,n.useCallback)(async()=>{if(s.selectedTopic){t(e=>(0,l.A)((0,l.A)({},e),{},{loading:!0}));try{const e=(await r.is.getQuestions(s.selectedTopic,s.difficulty,s.questionCount)).data.questions;d(0),t(s=>(0,l.A)((0,l.A)({},s),{},{stage:"quiz",questions:e,answers:new Array(e.length).fill(-1),loading:!1}))}catch(e){console.error("Failed to load quiz questions:",e),alert("Failed to load quiz questions. Please try again."),t(e=>(0,l.A)((0,l.A)({},e),{},{loading:!1}))}}else alert("Please select a topic")},[s.selectedTopic,s.difficulty,s.questionCount]),x=(0,n.useCallback)(e=>{const n=[...s.answers];n[s.currentQuestion]=e,t(e=>(0,l.A)((0,l.A)({},e),{},{answers:n}))},[s.answers,s.currentQuestion]),g=(0,n.useCallback)(async()=>{if(s.currentQuestion<s.questions.length-1)t(e=>(0,l.A)((0,l.A)({},e),{},{currentQuestion:e.currentQuestion+1}));else{t(e=>(0,l.A)((0,l.A)({},e),{},{loading:!0}));try{const e={topic:s.selectedTopic,difficulty:s.difficulty,answers:s.answers,timeSpent:c,questions:s.questions},n=(await r.is.submitQuiz(e)).data;t(e=>(0,l.A)((0,l.A)({},e),{},{stage:"results",score:n.score,timeSpent:n.timeSpent,loading:!1}))}catch(e){console.error("Failed to submit quiz:",e);const n=s.answers.reduce((e,t,l)=>e+(t===s.questions[l].correct?1:0),0);t(e=>(0,l.A)((0,l.A)({},e),{},{stage:"results",score:Math.round(n/s.questions.length*100),timeSpent:c,loading:!1}))}}},[s.currentQuestion,s.questions,s.answers,s.selectedTopic,s.difficulty,c]),b=(0,n.useCallback)(()=>{t(e=>(0,l.A)((0,l.A)({},e),{},{stage:"setup",category:"",selectedTopic:"",currentQuestion:0,answers:[],score:0,timeSpent:0})),d(0)},[]),h=e=>{const s=Math.floor(e/60),t=e%60;return"".concat(s,":").concat(t.toString().padStart(2,"0"))},p="cs"===s.category?"blue":"purple";return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("button",{onClick:()=>e("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,o.jsx)(i.kRp,{className:"text-2xl text-gray-600"})}),(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Custom Quiz"})]}),"quiz"===s.stage&&(0,o.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold text-blue-600",children:[(0,o.jsx)(i.Ohp,{})," ",h(c)]})]})}),(0,o.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:["setup"===s.stage&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create Your Quiz"}),s.category?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>t(e=>(0,l.A)((0,l.A)({},e),{},{category:"",selectedTopic:""})),className:"mb-6 text-sm text-gray-600 hover:text-gray-900 underline",children:"\u2190 Change Category"}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Topic"}),(0,o.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(e=>(0,o.jsx)("button",{onClick:()=>t(s=>(0,l.A)((0,l.A)({},s),{},{selectedTopic:e})),className:"p-3 rounded-lg font-medium transition-all text-sm ".concat(s.selectedTopic===e?"blue"===p?"bg-blue-600 text-white":"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Difficulty Level"}),(0,o.jsx)("div",{className:"flex gap-4",children:["easy","medium","hard"].map(e=>(0,o.jsx)("button",{onClick:()=>t(s=>(0,l.A)((0,l.A)({},s),{},{difficulty:e})),className:"px-6 py-2 rounded-lg font-medium transition-all capitalize ".concat(s.difficulty===e?"blue"===p?"bg-blue-600 text-white":"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Number of Questions"}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("input",{type:"range",min:"3",max:"20",value:s.questionCount,onChange:e=>t(s=>(0,l.A)((0,l.A)({},s),{},{questionCount:parseInt(e.target.value)})),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),(0,o.jsx)("span",{className:"text-2xl font-bold text-blue-600 min-w-12 text-center",children:s.questionCount})]})]}),(0,o.jsxs)("button",{onClick:m,disabled:s.loading,className:"w-full text-white py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat("blue"===p?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"),children:[s.loading?(0,o.jsx)(i.jTZ,{className:"animate-spin"}):(0,o.jsx)(i.FrA,{}),s.loading?"Loading Questions...":"Start Quiz"]})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-4",children:"Select Category"}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("button",{onClick:()=>t(e=>(0,l.A)((0,l.A)({},e),{},{category:"cs"})),className:"flex-1 px-6 py-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors",children:"\ud83d\udcbb Computer Science"}),(0,o.jsx)("button",{onClick:()=>t(e=>(0,l.A)((0,l.A)({},e),{},{category:"ece"})),className:"flex-1 px-6 py-4 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700 transition-colors",children:"\u26a1 Electronics & Communication"})]})]})]}),"quiz"===s.stage&&s.questions.length>0&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsxs)("span",{className:"text-sm font-semibold text-gray-600",children:["Question ",s.currentQuestion+1," of ",s.questions.length]}),(0,o.jsxs)("span",{className:"text-sm font-semibold text-blue-600 capitalize",children:[s.selectedTopic," \u2022 ",s.difficulty]})]}),(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,o.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat((s.currentQuestion+1)/s.questions.length*100,"%")}})})]}),(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:s.questions[s.currentQuestion].question}),(0,o.jsx)("div",{className:"space-y-3 mb-8",children:s.questions[s.currentQuestion].options.map((e,t)=>(0,o.jsx)("button",{onClick:()=>x(t),className:"w-full p-4 rounded-lg text-left font-medium transition-all ".concat(s.answers[s.currentQuestion]===t?"bg-blue-600 text-white border-2 border-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-transparent"),children:e},t))}),(0,o.jsx)("button",{onClick:g,disabled:-1===s.answers[s.currentQuestion]||s.loading,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s.loading?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.jTZ,{className:"animate-spin"}),"Submitting..."]}):s.currentQuestion===s.questions.length-1?"Finish Quiz":"Next Question"})]}),"results"===s.stage&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Quiz Results"}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,o.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[Math.round(s.score/s.questions.length*100),"%"]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Score"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:[s.score,"/",s.questions.length]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,o.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:h(s.timeSpent)}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Time"})]})]}),(0,o.jsx)("div",{className:"space-y-4 mb-8",children:s.questions.map((e,t)=>(0,o.jsx)("div",{className:"border rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex items-start gap-3 mb-2",children:[s.answers[t]===e.correct?(0,o.jsx)(i.YrT,{className:"text-green-600 text-xl flex-shrink-0 mt-1"}):(0,o.jsx)(i.yGN,{className:"text-red-600 text-xl flex-shrink-0 mt-1"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("p",{className:"font-semibold text-gray-900",children:e.question}),(0,o.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Your answer: ",(0,o.jsx)("span",{className:"font-medium",children:e.options[s.answers[t]]})]}),s.answers[t]!==e.correct&&(0,o.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["Correct: ",(0,o.jsx)("span",{className:"font-medium",children:e.options[e.correct]})]}),(0,o.jsx)("p",{className:"text-sm text-gray-700 mt-2 bg-blue-50 p-2 rounded",children:e.explanation})]})]})},t))}),(0,o.jsxs)("button",{onClick:b,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[(0,o.jsx)(i.jTZ,{})," Retake Quiz"]})]})]})]})}}}]);