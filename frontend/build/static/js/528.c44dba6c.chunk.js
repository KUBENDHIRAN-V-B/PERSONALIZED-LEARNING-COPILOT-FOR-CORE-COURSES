"use strict";(self.webpackChunklearning_copilot_frontend=self.webpackChunklearning_copilot_frontend||[]).push([[528],{4528(e,s,t){t.r(s),t.d(s,{default:()=>c});var a=t(2555),l=t(9950),n=t(8429),i=t(9861),r=t(2932),o=t(4414);const c=()=>{const e=(0,n.Zp)(),[s,t]=(0,l.useState)({stage:"setup",category:"",selectedTopic:"",difficulty:"medium",questionCount:5,useAI:!1,questions:[],answers:[],scorePercent:0,correctCount:0,timeSpent:0,loading:!1,sessionId:void 0,showAllQuestions:!0}),[c,d]=(0,l.useState)(0);(0,l.useEffect)(()=>{let e;return"quiz"===s.stage&&(e=setInterval(()=>{d(e=>e+1)},1e3)),()=>clearInterval(e)},[s.stage]);const u="cs"===s.category?["Arrays","Linked Lists","Trees","Graphs","Sorting","Dynamic Programming"]:"ece"===s.category?["Digital Electronics","Signals & Systems","Communication Systems","Control Systems","Microprocessors"]:[],x=(0,l.useCallback)(async()=>{if(s.selectedTopic){t(e=>(0,a.A)((0,a.A)({},e),{},{loading:!0}));try{let e,l=[];if(s.useAI){const e=localStorage.getItem("api_keys");if(!e)return alert("API keys are required for AI-generated quizzes. Please add your API keys in settings."),void t(e=>(0,a.A)((0,a.A)({},e),{},{loading:!1}));const n=JSON.parse(e),i=await r.is.generateQuestions({subject:"cs"===s.category?"Computer Science":"Electronics and Communication Engineering",topic:s.selectedTopic,difficulty:s.difficulty,count:s.questionCount,apiKeys:n});l=i.data.questions.map(e=>({id:e.id,question:e.question,options:e.options,difficulty:e.difficulty,correctIndex:e.correctIndex,explanation:e.explanation}))}else{const t=await r.is.startAdaptive({topic:s.selectedTopic,difficulty:s.difficulty,questionCount:s.questionCount,useAI:!1});e=t.data.sessionId,l=[t.data.question];for(let e=1;e<s.questionCount;e++)l.push({id:"placeholder-".concat(e),question:"Question ".concat(e+1,": This is a placeholder for non-AI quiz questions."),options:["Option A","Option B","Option C","Option D"],difficulty:s.difficulty})}d(0),t(s=>(0,a.A)((0,a.A)({},s),{},{stage:"quiz",questions:l,answers:new Array(l.length).fill(-1),sessionId:e,loading:!1}))}catch(e){console.error("Failed to load quiz questions:",e),alert("Failed to load quiz questions. Please try again."),t(e=>(0,a.A)((0,a.A)({},e),{},{loading:!1}))}}else alert("Please select a topic")},[s.selectedTopic,s.difficulty,s.questionCount,s.useAI]),m=(0,l.useCallback)((e,l)=>{const n=[...s.answers];n[e]=l,t(e=>(0,a.A)((0,a.A)({},e),{},{answers:n}))},[s.answers]),g=(0,l.useCallback)(async()=>{if(s.answers.some(e=>-1===e))alert("Please answer all questions before submitting.");else{t(e=>(0,a.A)((0,a.A)({},e),{},{loading:!0}));try{if(s.useAI){let e=0;const l=s.questions.map((t,a)=>(s.answers[a]===t.correctIndex&&e++,t)),n=Math.round(e/s.questions.length*100);t(s=>(0,a.A)((0,a.A)({},s),{},{stage:"results",questions:l,scorePercent:n,correctCount:e,timeSpent:c,loading:!1}))}else{const e=Math.floor(Math.random()*(s.questions.length+1)),l=Math.round(e/s.questions.length*100);t(s=>(0,a.A)((0,a.A)({},s),{},{stage:"results",scorePercent:l,correctCount:e,timeSpent:c,loading:!1}))}}catch(e){console.error("Failed to submit answers:",e),alert("Failed to submit your answers. Please try again."),t(e=>(0,a.A)((0,a.A)({},e),{},{loading:!1}))}}},[s.answers,s.questions,s.useAI,c]),b=(0,l.useCallback)(()=>{t(e=>(0,a.A)((0,a.A)({},e),{},{stage:"setup",category:"",selectedTopic:"",questions:[],answers:[],scorePercent:0,correctCount:0,timeSpent:0,sessionId:void 0})),d(0)},[]),p=e=>{const s=Math.floor(e/60),t=e%60;return"".concat(s,":").concat(t.toString().padStart(2,"0"))},h="cs"===s.category?"blue":"purple";return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("button",{onClick:()=>e("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,o.jsx)(i.kRp,{className:"text-2xl text-gray-600"})}),(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Custom Quiz"})]}),"quiz"===s.stage&&(0,o.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold text-blue-600",children:[(0,o.jsx)(i.Ohp,{})," ",p(c)]})]})}),(0,o.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:["setup"===s.stage&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create Your Quiz"}),s.category?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>t(e=>(0,a.A)((0,a.A)({},e),{},{category:"",selectedTopic:""})),className:"mb-6 text-sm text-gray-600 hover:text-gray-900 underline",children:"\u2190 Change Category"}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Select Topic"}),(0,o.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(e=>(0,o.jsx)("button",{onClick:()=>t(s=>(0,a.A)((0,a.A)({},s),{},{selectedTopic:e})),className:"p-3 rounded-lg font-medium transition-all text-sm ".concat(s.selectedTopic===e?"blue"===h?"bg-blue-600 text-white":"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Difficulty Level"}),(0,o.jsx)("div",{className:"flex gap-4",children:["easy","medium","hard"].map(e=>(0,o.jsx)("button",{onClick:()=>t(s=>(0,a.A)((0,a.A)({},s),{},{difficulty:e})),className:"px-6 py-2 rounded-lg font-medium transition-all capitalize ".concat(s.difficulty===e?"blue"===h?"bg-blue-600 text-white":"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Number of Questions"}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("input",{type:"range",min:"3",max:"20",value:s.questionCount,onChange:e=>t(s=>(0,a.A)((0,a.A)({},s),{},{questionCount:parseInt(e.target.value)})),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),(0,o.jsx)("span",{className:"text-2xl font-bold text-blue-600 min-w-12 text-center",children:s.questionCount})]})]}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,o.jsx)("input",{type:"checkbox",checked:s.useAI,onChange:e=>t(s=>(0,a.A)((0,a.A)({},s),{},{useAI:e.target.checked})),className:"w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),(0,o.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Use AI-generated questions (requires API keys)"})]}),s.useAI&&(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-8",children:"Generate unlimited personalized questions using your API keys"})]}),(0,o.jsxs)("button",{onClick:x,disabled:s.loading,className:"w-full text-white py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat("blue"===h?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"),children:[s.loading?(0,o.jsx)(i.jTZ,{className:"animate-spin"}):(0,o.jsx)(i.FrA,{}),s.loading?"Loading Questions...":"Start ".concat(s.useAI?"AI":"Standard"," Quiz")]})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-4",children:"Select Category"}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("button",{onClick:()=>t(e=>(0,a.A)((0,a.A)({},e),{},{category:"cs"})),className:"flex-1 px-6 py-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors",children:"\ud83d\udcbb Computer Science"}),(0,o.jsx)("button",{onClick:()=>t(e=>(0,a.A)((0,a.A)({},e),{},{category:"ece"})),className:"flex-1 px-6 py-4 bg-purple-600 text-white rounded-lg font-bold hover:bg-purple-700 transition-colors",children:"\u26a1 Electronics & Communication"})]})]})]}),"quiz"===s.stage&&s.questions.length>0&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:[s.selectedTopic," Quiz"]}),(0,o.jsxs)("span",{className:"text-sm font-semibold text-blue-600 capitalize",children:[s.difficulty," \u2022 ",s.questions.length," Questions"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-lg font-semibold text-blue-600",children:[(0,o.jsx)(i.Ohp,{})," ",p(c)]})]}),(0,o.jsx)("div",{className:"space-y-8",children:s.questions.map((e,t)=>(0,o.jsxs)("div",{className:"border-b border-gray-200 pb-8 last:border-b-0",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Question ",t+1,": ",e.question]}),(0,o.jsx)("span",{className:"text-sm font-medium text-blue-600 capitalize",children:e.difficulty})]}),(0,o.jsx)("div",{className:"space-y-3",children:e.options.map((e,a)=>(0,o.jsx)("button",{onClick:()=>m(t,a),className:"w-full p-4 rounded-lg text-left font-medium transition-all ".concat(s.answers[t]===a?"bg-blue-600 text-white border-2 border-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-2 border-transparent"),children:e},a))})]},e.id))}),(0,o.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,o.jsx)("button",{onClick:g,disabled:s.answers.some(e=>-1===e)||s.loading,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s.loading?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.jTZ,{className:"animate-spin"}),"Submitting Answers..."]}):"Submit All Answers"})})]}),"results"===s.stage&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Quiz Results"}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,o.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:[s.scorePercent,"%"]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Score"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,o.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:[s.correctCount,"/",s.questions.length]}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Correct"})]}),(0,o.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,o.jsx)("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:p(s.timeSpent)}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Time"})]})]}),(0,o.jsx)("div",{className:"space-y-4 mb-8",children:s.questions.map((e,t)=>{var a;return(0,o.jsx)("div",{className:"border rounded-lg p-4",children:(0,o.jsxs)("div",{className:"flex items-start gap-3 mb-2",children:[s.answers[t]===(null!==(a=e.correctIndex)&&void 0!==a?a:-999)?(0,o.jsx)(i.YrT,{className:"text-green-600 text-xl flex-shrink-0 mt-1"}):(0,o.jsx)(i.yGN,{className:"text-red-600 text-xl flex-shrink-0 mt-1"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("p",{className:"font-semibold text-gray-900",children:e.question}),(0,o.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Your answer: ",(0,o.jsx)("span",{className:"font-medium",children:e.options[s.answers[t]]})]}),void 0!==e.correctIndex&&s.answers[t]!==e.correctIndex&&(0,o.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:["Correct: ",(0,o.jsx)("span",{className:"font-medium",children:e.options[e.correctIndex]})]}),(0,o.jsx)("p",{className:"text-sm text-gray-700 mt-2 bg-blue-50 p-2 rounded",children:e.explanation||"Explanation will appear after submission."})]})]})},t)})}),(0,o.jsxs)("button",{onClick:b,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[(0,o.jsx)(i.jTZ,{})," Retake Quiz"]})]})]})]})}}}]);